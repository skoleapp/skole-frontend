mutation Register($username: String!, $email: String!, $password: String!, $code: String!) {
    register(input: { username: $username, email: $email, password: $password, code: $code }) {
        user {
            id
            created
        }
        errors {
            field
            messages
        }
    }
    login(input: { username: $username, password: $password }) {
        token
        user {
            id
            username
            email
            title
            bio
            avatar
            score
            courseCount
            resourceCount
            created
            starredCourses {
                id
                name
                code
                score
            }
            starredResources {
                id
                title
                score
                date
            }
        }
        errors {
            field
            messages
        }
    }
}

mutation Login($username: String!, $password: String!) {
    login(input: { username: $username, password: $password }) {
        token
        user {
            id
            username
            email
            title
            bio
            avatar
            score
            courseCount
            resourceCount
            created
            starredCourses {
                id
                name
                code
                score
            }
            starredResources {
                id
                title
                score
                date
            }
        }
        errors {
            field
            messages
        }
    }
}

query UserMe {
    userMe {
        id
        username
        email
        title
        bio
        avatar
        score
        courseCount
        resourceCount
        created
        starredCourses {
            id
            name
            code
            score
        }
        starredResources {
            id
            title
            score
            date
        }
    }
}

mutation ChangePassword($oldPassword: String!, $newPassword: String!) {
    changePassword(input: { oldPassword: $oldPassword, newPassword: $newPassword }) {
        errors {
            field
            messages
        }
    }
}

mutation DeleteAccount($password: String!) {
    deleteUser(input: { password: $password }) {
        errors {
            field
            messages
        }
    }
}

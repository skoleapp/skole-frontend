mutation Register($username: String!, $email: String!, $password: String!, $code: String!) {
    register(input: { username: $username, email: $email, password: $password, code: $code }) {
        errors {
            field
            messages
        }
    }
    login(input: { usernameOrEmail: $username, password: $password }) {
        token
        user {
            id
            created
        }
        errors {
            field
            messages
        }
    }
}

mutation Login($usernameOrEmail: String!, $password: String!) {
    login(input: { usernameOrEmail: $usernameOrEmail, password: $password }) {
        token
        user {
            id
            created
        }
        errors {
            field
            messages
        }
    }
}

query UserMe {
    userMe {
        id
        username
        email
        title
        bio
        avatar
        score
        courseCount
        resourceCount
        created
        verified
        starredCourses {
            id
            name
            code
            score
        }
        starredResources {
            id
            title
            score
            date
        }
    }
}

mutation ChangePassword($oldPassword: String!, $newPassword: String!) {
    changePassword(input: { oldPassword: $oldPassword, newPassword: $newPassword }) {
        message
        errors {
            field
            messages
        }
    }
}

mutation DeleteAccount($password: String!) {
    deleteUser(input: { password: $password }) {
        errors {
            field
            messages
        }
    }
}

mutation SendPasswordResetEmail($email: String!) {
    sendPasswordResetEmail(input: { email: $email }) {
        message
        errors {
            field
            messages
        }
    }
}

mutation ResetPassword($token: String, $newPassword: String!) {
    resetPassword(input: { token: $token, newPassword: $newPassword }) {
        message
        errors {
            field
            messages
        }
    }
}

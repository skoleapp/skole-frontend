mutation Register($username: String!, $email: String!, $password: String!, $code: String!) {
    register(input: { username: $username, email: $email, password: $password, code: $code }) {
        user {
            id
            created
        }
        errors {
            field
            messages
        }
    }
    login(input: { usernameOrEmail: $email, password: $password }) {
        token
        user {
            id
            title
            bio
            avatar
            points
            created
            email
        }
        errors {
            field
            messages
        }
    }
}

mutation Login($usernameOrEmail: String!, $password: String!) {
    login(input: { usernameOrEmail: $usernameOrEmail, password: $password }) {
        token
        user {
            id
            title
            bio
            avatar
            points
            created
            email
        }
        errors {
            field
            messages
        }
    }
}

query UserMe {
    userMe {
        id
        username
        email
        title
        bio
        avatar
        points
        courseCount
        resourceCount
        created
        starredCourses {
            id
            name
            code
            points
        }
        starredResources {
            id
            title
            points
        }
    }
}

mutation ChangePassword($oldPassword: String!, $newPassword: String!) {
    changePassword(input: { oldPassword: $oldPassword, newPassword: $newPassword }) {
        errors {
            field
            messages
        }
    }
}

mutation DeleteAccount($password: String!) {
    deleteUser(input: { password: $password }) {
        errors {
            field
            messages
        }
    }
}
